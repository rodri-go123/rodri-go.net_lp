<div class="main-section" id="work-container">
  <div id="work" class="flex-center">
    <div class="work-wrapper flex-start full-width">
      <p>
        <span class="inline-header black">Work &rarr;</span>&nbsp; <span class="filter-category {% if page.url == '/' %}active{% endif %}"><a href="/#work">All categories</a></span>&nbsp; / &nbsp;
        {%- set allCategories = [] -%}
        {% set lastSegment = page.url | lastSegment %}

        {%- for project in collections.project -%}
          {%- for category in project.data.categories -%}
            {%- if category not in allCategories -%}
              {%- set allCategories = allCategories.concat([category]) -%}
            {%- endif -%}
          {%- endfor -%}
        {%- endfor -%}

        {%- for category in allCategories | sort -%}
          <span class="filter-category {% if lastSegment | capitalize == category %}active{% endif %}"><a href="/categories/{{ category | slug }}/">{{category | capitalize}}</a></span>
          {%- if not loop.last -%}
            &nbsp; / &nbsp;
          {%- endif -%}
        {%- endfor -%}
        <br>
        <span class="filter-category"><a href="/#work">All years</a></span>&nbsp; / &nbsp;
        {%- set allYears = [] -%}

        {%- for project in collections.project -%}
          {%- if project.data.year not in allYears -%}
            {%- set allYears = allYears.concat([project.data.year]) -%}
          {%- endif -%}
        {%- endfor -%}

        {%- for year in allYears | sort | reverse -%}
          <span class="filter-category {% if lastSegment | capitalize == year %}active{% endif %}"><a href="/years/{{ year | slug }}/">{{year}}</a></span>
          {%- if not loop.last -%}
            &nbsp; / &nbsp;
          {%- endif -%}
        {%- endfor -%}
      </p>
    </div>
  </div>
</div>